<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>cr_lib: cr.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cr_lib
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cr_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cr.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;setjmp.h&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
</div>
<p><a href="cr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coroutine context information.  <a href="struct_c_r___c_o_n_t_e_x_t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac68ef77f5ea5f5dda5a2f046a2c96429"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#ac68ef77f5ea5f5dda5a2f046a2c96429">CR_THREAD_INIT</a>()</td></tr>
<tr class="memdesc:ac68ef77f5ea5f5dda5a2f046a2c96429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a function as a coroutine.  <a href="#ac68ef77f5ea5f5dda5a2f046a2c96429">More...</a><br/></td></tr>
<tr class="separator:ac68ef77f5ea5f5dda5a2f046a2c96429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad89b832374912ca6c097b550a95a8ebf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#ad89b832374912ca6c097b550a95a8ebf">CR_START</a>(func_name)</td></tr>
<tr class="memdesc:ad89b832374912ca6c097b550a95a8ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the cr_lib system.  <a href="#ad89b832374912ca6c097b550a95a8ebf">More...</a><br/></td></tr>
<tr class="separator:ad89b832374912ca6c097b550a95a8ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18adb578c9437579bc39134852d4fc5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a18adb578c9437579bc39134852d4fc5b">CR_YIELD</a>(func_name)</td></tr>
<tr class="memdesc:a18adb578c9437579bc39134852d4fc5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicitly yields to a coroutine.  <a href="#a18adb578c9437579bc39134852d4fc5b">More...</a><br/></td></tr>
<tr class="separator:a18adb578c9437579bc39134852d4fc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa058fade3e44aea5c2098896835e47fc"><td class="memItemLeft" align="right" valign="top">typedef int8_t volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#aa058fade3e44aea5c2098896835e47fc">cr_int8_t</a></td></tr>
<tr class="memdesc:aa058fade3e44aea5c2098896835e47fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coroutine variable typedefs.  <a href="#aa058fade3e44aea5c2098896835e47fc">More...</a><br/></td></tr>
<tr class="separator:aa058fade3e44aea5c2098896835e47fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f142aa6006115a8412684a32dd577e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73f142aa6006115a8412684a32dd577e"></a>
typedef uint8_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_uint8_t</b></td></tr>
<tr class="separator:a73f142aa6006115a8412684a32dd577e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5ed048ec745ff236a340b1c264abbe0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac5ed048ec745ff236a340b1c264abbe0"></a>
typedef int16_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_int16_t</b></td></tr>
<tr class="separator:ac5ed048ec745ff236a340b1c264abbe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f5bcd89871c409b2672e1c905fd47c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45f5bcd89871c409b2672e1c905fd47c"></a>
typedef uint16_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_uint16_t</b></td></tr>
<tr class="separator:a45f5bcd89871c409b2672e1c905fd47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0513e6e6438b6d5c05a75d3585499747"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0513e6e6438b6d5c05a75d3585499747"></a>
typedef int32_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_int32_t</b></td></tr>
<tr class="separator:a0513e6e6438b6d5c05a75d3585499747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e19850a31b4ddf93cbfac80d8f5596"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70e19850a31b4ddf93cbfac80d8f5596"></a>
typedef uint32_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_uint32_t</b></td></tr>
<tr class="separator:a70e19850a31b4ddf93cbfac80d8f5596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81aabf8e7ff2cc78c58b0791f0b015e5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a81aabf8e7ff2cc78c58b0791f0b015e5"></a>
typedef int64_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_int64_t</b></td></tr>
<tr class="separator:a81aabf8e7ff2cc78c58b0791f0b015e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b44f3e0d6d8337340687b83d6603e5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a00b44f3e0d6d8337340687b83d6603e5"></a>
typedef uint64_t volatile&#160;</td><td class="memItemRight" valign="bottom"><b>cr_uint64_t</b></td></tr>
<tr class="separator:a00b44f3e0d6d8337340687b83d6603e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9a0f05a9df6e08a47e828db183fa186"><td class="memItemLeft" align="right" valign="top">typedef int32_t volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a></td></tr>
<tr class="memdesc:ae9a0f05a9df6e08a47e828db183fa186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coroutine ID typedef.  <a href="#ae9a0f05a9df6e08a47e828db183fa186">More...</a><br/></td></tr>
<tr class="separator:ae9a0f05a9df6e08a47e828db183fa186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d1195c5636aed1fc8a4bdd7ade60f5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a22d1195c5636aed1fc8a4bdd7ade60f5">CR_CONTEXT</a></td></tr>
<tr class="memdesc:a22d1195c5636aed1fc8a4bdd7ade60f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coroutine context information.  <a href="#a22d1195c5636aed1fc8a4bdd7ade60f5">More...</a><br/></td></tr>
<tr class="separator:a22d1195c5636aed1fc8a4bdd7ade60f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<a class="el" href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a7f396d7461f79cb150ed6b69934f58ec">SETJMP_DFLT_RET_VAL</a> = 1, 
<a class="el" href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a60cd04d936d5d89f7468cf9f5240a487">CR_IDLE_THREAD_ID</a> = 0, 
<a class="el" href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a01288475e3cc36707461f9b757d00e74">CR_SYSTEM_STARTED</a> = -1, 
<a class="el" href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7acd063e5de520275d94952e07b5f29b18">CR_INVALID_ID</a> = -1, 
<br/>
&#160;&#160;<a class="el" href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a139db075566e7ab9f59a9de7f6d2359f">CR_THREAD_CNT_INIT</a> = -1
<br/>
 }</td></tr>
<tr class="memdesc:adf764cbdea00d65edcd07bb9953ad2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Annonymous enumerations that define various states and settings.  <a href="cr_8h.html#adf764cbdea00d65edcd07bb9953ad2b7">More...</a><br/></td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e8d6963f6ee2cc49502186eca21d879"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a3e8d6963f6ee2cc49502186eca21d879">cr_reset</a> (void)</td></tr>
<tr class="memdesc:a3e8d6963f6ee2cc49502186eca21d879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the system to an initial state.  <a href="#a3e8d6963f6ee2cc49502186eca21d879">More...</a><br/></td></tr>
<tr class="separator:a3e8d6963f6ee2cc49502186eca21d879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6b87323f9ce0bf21b3f06209a97989"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#aca6b87323f9ce0bf21b3f06209a97989">cr_init</a> (<a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a> *cr_context, size_t cr_context_count)</td></tr>
<tr class="memdesc:aca6b87323f9ce0bf21b3f06209a97989"><td class="mdescLeft">&#160;</td><td class="mdescRight">cr_lib's initialization function.  <a href="#aca6b87323f9ce0bf21b3f06209a97989">More...</a><br/></td></tr>
<tr class="separator:aca6b87323f9ce0bf21b3f06209a97989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7a31163658d81c9473e5b637d9eb90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a3e7a31163658d81c9473e5b637d9eb90">cr_get_id</a> (void(*pFunc)(void))</td></tr>
<tr class="memdesc:a3e7a31163658d81c9473e5b637d9eb90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the ID of a coroutine.  <a href="#a3e7a31163658d81c9473e5b637d9eb90">More...</a><br/></td></tr>
<tr class="separator:a3e7a31163658d81c9473e5b637d9eb90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd73b48023970380bfdecb56483976c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#accd73b48023970380bfdecb56483976c">cr_idle</a> (void)</td></tr>
<tr class="memdesc:accd73b48023970380bfdecb56483976c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The internal system's coroutine thread.  <a href="#accd73b48023970380bfdecb56483976c">More...</a><br/></td></tr>
<tr class="separator:accd73b48023970380bfdecb56483976c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30bdb4ef569c0678e4cb49829f11bbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#ae30bdb4ef569c0678e4cb49829f11bbb">cr_register_thread</a> (void(*pFunc)(void))</td></tr>
<tr class="memdesc:ae30bdb4ef569c0678e4cb49829f11bbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a function as a coroutine thread.  <a href="#ae30bdb4ef569c0678e4cb49829f11bbb">More...</a><br/></td></tr>
<tr class="separator:ae30bdb4ef569c0678e4cb49829f11bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a22841ff791649abd0bcb62392ebb9778"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a22841ff791649abd0bcb62392ebb9778">cr_g_context</a></td></tr>
<tr class="memdesc:a22841ff791649abd0bcb62392ebb9778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the user defined array of coroutine contexts.  <a href="#a22841ff791649abd0bcb62392ebb9778">More...</a><br/></td></tr>
<tr class="separator:a22841ff791649abd0bcb62392ebb9778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8238e77b653b2cc4905373b805fc3567"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a8238e77b653b2cc4905373b805fc3567">cr_g_context_cnt</a></td></tr>
<tr class="memdesc:a8238e77b653b2cc4905373b805fc3567"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of elements in the coroutine context array.  <a href="#a8238e77b653b2cc4905373b805fc3567">More...</a><br/></td></tr>
<tr class="separator:a8238e77b653b2cc4905373b805fc3567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00999e3368c59592db0c069abf1f1296"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a00999e3368c59592db0c069abf1f1296">cr_g_sys_started</a></td></tr>
<tr class="memdesc:a00999e3368c59592db0c069abf1f1296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag that's set when CR_START is called.  <a href="#a00999e3368c59592db0c069abf1f1296">More...</a><br/></td></tr>
<tr class="separator:a00999e3368c59592db0c069abf1f1296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e93574baec3ae2b083c7f36916fbbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#ae7e93574baec3ae2b083c7f36916fbbd">cr_g_previous_cr_id</a></td></tr>
<tr class="memdesc:ae7e93574baec3ae2b083c7f36916fbbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ID of the previously active coroutine.  <a href="#ae7e93574baec3ae2b083c7f36916fbbd">More...</a><br/></td></tr>
<tr class="separator:ae7e93574baec3ae2b083c7f36916fbbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4ab64c8de56045d84e53b65dba7eb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#acf4ab64c8de56045d84e53b65dba7eb8">cr_g_current_cr_id</a></td></tr>
<tr class="memdesc:acf4ab64c8de56045d84e53b65dba7eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ID of the coroutine that's active.  <a href="#acf4ab64c8de56045d84e53b65dba7eb8">More...</a><br/></td></tr>
<tr class="separator:acf4ab64c8de56045d84e53b65dba7eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1374fdc17d74ee4b6e94c63251886ea3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1374fdc17d74ee4b6e94c63251886ea3"></a>
jmp_buf&#160;</td><td class="memItemRight" valign="bottom"><b>cr_g_reg_func_env</b></td></tr>
<tr class="separator:a1374fdc17d74ee4b6e94c63251886ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1345c6db4d2d1d939e7841da46704d8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1345c6db4d2d1d939e7841da46704d8e"></a>
<a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cr_8h.html#a1345c6db4d2d1d939e7841da46704d8e">cr_g_activate_id</a></td></tr>
<tr class="memdesc:a1345c6db4d2d1d939e7841da46704d8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the ID of the coroutine to be activated - by cr_idle. <br/></td></tr>
<tr class="separator:a1345c6db4d2d1d939e7841da46704d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Original author : Joseph D Poirier </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Creation date : February 2006</dd></dl>
<dl class="section version"><dt>Version</dt><dd>X.X.X</dd></dl>
<p>VERSION DATE/AUTHOR COMMENT</p>
<p>LICENSE: see the license.txt file </p>

<p>Definition in file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad89b832374912ca6c097b550a95a8ebf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CR_START</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func_name</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the cr_lib system. </p>
<p>This macro basically boostraps the system. Bootstrap the system by fetching the ID of the coroutine to call and call it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func_name</td><td>the name of a user coroutine or cr_idle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>cr_init must have been called and coroutine registration completed </dd></dl>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00106">106</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac68ef77f5ea5f5dda5a2f046a2c96429"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CR_THREAD_INIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a function as a coroutine. </p>
<p>This macro creates the static variable this_id__ which holds the ID of the newly created coroutine. cr_g_current_cr_id is used by cr_register_thread to pass the newly assigned coroutine ID to the function being registered. The ID is then used to save the new coroutine's context, which serves as the initial entry point in to the coroutine. Rather than returning normally, a longjmp is performed to get back to the cr_register_thread function.</p>
<dl class="section attention"><dt>Attention</dt><dd>This macro should be placed at the start of the function being registered as a coroutine. Also, a coroutine should never return normally. </dd></dl>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00090">90</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<a class="anchor" id="a18adb578c9437579bc39134852d4fc5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CR_YIELD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func_name</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Explicitly yields to a coroutine. </p>
<p>This macro fetches the ID of the coroutine to be called, sets the current environment, then makes a longjmp to the desired coroutine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func_name</td><td>the name of a user coroutine or cr_idle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00122">122</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a22d1195c5636aed1fc8a4bdd7ade60f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a>  <a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coroutine context information. </p>
<p>A pointer to an array of this structure type is passed to the cr_init function.</p>
<dl class="section note"><dt>Note</dt><dd>The context array <em>must</em> include 1 extra element for the system's cr_idle coroutine. </dd></dl>

</div>
</div>
<a class="anchor" id="ae9a0f05a9df6e08a47e828db183fa186"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t volatile <a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coroutine ID typedef. </p>
<p>Coroutine ID type used by the cr_lib system. </p>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00063">63</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa058fade3e44aea5c2098896835e47fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int8_t volatile <a class="el" href="cr_8h.html#aa058fade3e44aea5c2098896835e47fc">cr_int8_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coroutine variable typedefs. </p>
<p>Some convenience typdefs for defining local thread variables.</p>
<dl class="section note"><dt>Note</dt><dd>Local types <em>should</em> include the volatile qualifier. </dd></dl>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00038">38</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Annonymous enumerations that define various states and settings. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a7f396d7461f79cb150ed6b69934f58ec"></a>SETJMP_DFLT_RET_VAL</em>&#160;</td><td class="fielddoc">
<p>longjmp's required second paramter, which is setjmp's return value </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a60cd04d936d5d89f7468cf9f5240a487"></a>CR_IDLE_THREAD_ID</em>&#160;</td><td class="fielddoc">
<p>ID of the system's cr_idle coroutine </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a01288475e3cc36707461f9b757d00e74"></a>CR_SYSTEM_STARTED</em>&#160;</td><td class="fielddoc">
<p>Sentinal flag used internally </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7acd063e5de520275d94952e07b5f29b18"></a>CR_INVALID_ID</em>&#160;</td><td class="fielddoc">
<p>Returned by cr_get_id when an ID is not found </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a139db075566e7ab9f59a9de7f6d2359f"></a>CR_THREAD_CNT_INIT</em>&#160;</td><td class="fielddoc">
<p>Internal initialization value </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="cr_8h_source.html#l00050">50</a> of file <a class="el" href="cr_8h_source.html">cr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3e7a31163658d81c9473e5b637d9eb90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a> cr_get_id </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>pFunc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the ID of a coroutine. </p>
<p>Returns the ID of a registered coroutine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pFunc</td><td>the registered coroutine whose ID is requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">CR_INVALID_ID</td><td>when no ID is found </td></tr>
    <tr><td class="paramname">id</td><td>a valid coroutine's ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00211">211</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="accd73b48023970380bfdecb56483976c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cr_idle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The internal system's coroutine thread. </p>
<p>This coroutine thread is used in conjunction with the cr_g_activate_id variable. cr_g_activate_id can be set to a coroutine's ID, e.g. in an ISR handler, and this function will activate the coroutine. This will work only if this function is explicitly called via CR_YIELD.</p>
<dl class="section attention"><dt>Attention</dt><dd>This coroutine thread must be explicitly called for it to run. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00278">278</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca6b87323f9ce0bf21b3f06209a97989"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>cr_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cr_context_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>cr_lib's initialization function. </p>
<p>This function sets a global pointer to the array holding all of the registered coroutines context information, as well as, the element count of the array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cr_context</td><td>the context array </td></tr>
    <tr><td class="paramname">cr_context_count</td><td>the element count of the array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>This initialization function must be the first function called in the library. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00253">253</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae30bdb4ef569c0678e4cb49829f11bbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a> cr_register_thread </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>pFunc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a function as a coroutine thread. </p>
<p>This function creates an ID for the new coroutine thread and associates the ID with a context element. Information about the coroutine is set in the context element. cr_g_current_cr_id is set to the new coroutine's ID. The cr_register_thread function's context is saved and the user function is called. The CR_THREAD_INIT macro performs a longjmp back to this function using the previously saved context. The cr_g_sys_started flag is checked to determine if a user coroutine has exited via the function's epilog code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pFunc</td><td>the function to be registered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ID of the registered coroutine. </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>All coroutine thread registration must be completed before calling CR_START. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00327">327</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3e8d6963f6ee2cc49502186eca21d879"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cr_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the system to an initial state. </p>
<p>This function sets all the system's global variables to their original state. </p>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00233">233</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a22841ff791649abd0bcb62392ebb9778"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c_r___c_o_n_t_e_x_t.html">CR_CONTEXT</a>* cr_g_context</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to the user defined array of coroutine contexts. </p>
<dl class="section note"><dt>Note</dt><dd>For internal use only. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00172">172</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8238e77b653b2cc4905373b805fc3567"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t cr_g_context_cnt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of elements in the coroutine context array. </p>
<dl class="section note"><dt>Note</dt><dd>For internal use only. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00177">177</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf4ab64c8de56045d84e53b65dba7eb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a> cr_g_current_cr_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ID of the coroutine that's active. </p>
<dl class="section note"><dt>Note</dt><dd>For internal use only. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00191">191</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae7e93574baec3ae2b083c7f36916fbbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cr_8h.html#ae9a0f05a9df6e08a47e828db183fa186">cr_id_t</a> cr_g_previous_cr_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ID of the previously active coroutine. </p>
<dl class="section note"><dt>Note</dt><dd>For internal use only. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00196">196</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a00999e3368c59592db0c069abf1f1296"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t cr_g_sys_started</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag that's set when CR_START is called. </p>
<dl class="section note"><dt>Note</dt><dd>For internal use only. </dd></dl>

<p>Definition at line <a class="el" href="cr_8c_source.html#l00186">186</a> of file <a class="el" href="cr_8c_source.html">cr.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a></li><li class="navelem"><a class="el" href="dir_ab4a2a8f58443ea63cfcfdffd7c231a0.html">jpoirier</a></li><li class="navelem"><a class="el" href="dir_9524a5dcd496648901439b242113b84d.html">zzzzz</a></li><li class="navelem"><a class="el" href="dir_48a2180b4aacbe033a40b34b5c8931d5.html">sw-proj</a></li><li class="navelem"><a class="el" href="dir_1dae76576dd8ee161ecd9ea04bd286de.html">git</a></li><li class="navelem"><a class="el" href="dir_220233f2a31095a6719541d25d8a7f75.html">github.com</a></li><li class="navelem"><a class="el" href="dir_f42ef45241f2ff39ddc56ebfea6745a5.html">cr_lib</a></li><li class="navelem"><a class="el" href="cr_8h.html">cr.h</a></li>
    <li class="footer">Generated on Sun Sep 7 2014 14:40:36 for cr_lib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
